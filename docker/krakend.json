{
  "version": 3,
  "name": "My API Gateway",
  "port": 8000,
  "cache_ttl": "300s",
  "timeout": "3s",
  "output_encoding": "json",
  "endpoints": [
    {
      "endpoint": "/auth",
      "method": "POST",
      "output_encoding": "json",
      "backend": [
        {
          "url_pattern": "/auth/realms/{{.env.KC_REALM_NAME}}/protocol/openid-connect/token",
          "encoding": "json",
          "host": ["keycloak:8080"],
          "method": "POST"
        }
      ]
    },
    {
      "endpoint": "/metrics",
      "method": "GET",
      "output_encoding": "json",
      "backend": [
        {
          "url_pattern": "/metrics",
          "encoding": "json",
          "host": ["localhost:{{.env.PROMETHEUS_PORT}}"],
          "method": "GET"
        }
      ]
    },
    {
      "endpoint": "/grafana/dashboards",
      "method": "GET",
      "output_encoding": "json",
      "backend": [
        {
          "url_pattern": "/api/search",
          "encoding": "json",
          "host": ["{{.env.GF_HOSTNAME}}:{{.env.GF_SERVER_HTTP_PORT}}"],
          "method": "GET"
        }
      ]
    },
    {
      "endpoint": "/valid_users",
      "method": "GET",
      "output_encoding": "json",
      "backend": [
        {
          "url_pattern": "/valid_users",
          "encoding": "json",
          "host": ["{{.env.VALID_USERS}}"],
          "method": "GET"
        }
      ]
    }
  ]
}
